$def with (page, preview=False)

$var title: $_.EDIT $page.title

<p>[<a href="$changequery(m=None)">view</a>][<a href="$changequery(m='history')">history</a>]</p>

$if preview:
    <pre>$page.body</pre>

<script>
function changeTemplate() {
    var t = document.edit._type.value;
    document.location.href += '&t=' + t;
}
</script>

<form name="edit" method="post" action="">

<strong>$_.PAGETYPE</strong> <input type="text" name="_type" value="$page.type.name" />
<input type="button" onclick="changeTemplate()" value="Change"/>
<br /><br/>

<strong>$_.TITLE</strong> <input type="text" name="title" value="$page.title" /><br />
<textarea name="body" rows="25" cols="80">$page.body</textarea>

<p>
<input type="submit" name='_save' value="$_.SAVE" />
<input type="submit" name='_preview' value="$_.PREVIEW" />
<input type="submit" name='_delete' value="$_.DELETE" />
</p>
</form>
