$def with (page)

<html>
<head>
    <title>$page.title (Infogami)</title>
    <style type="text/css">
    .login { text-align: right; }
    .login, .status { color: gray; }
    .login :link, .login :visited, .status :link, .status :visited { color: gray; text-decoration: underline;}

    .error { color: red; font-weight: bold; }

    .linky {
        color: gray; background-color: transparent;
        border: none; cursor: pointer;
        margin: 0px; padding: 0px; vertical-align: bottom;
        display: inline;
        text-align: right;
        text-decoration: underline;
    }
    form th { text-align: right; color: gray; font-weight: normal; text-transform: lowercase; }
    form .wrong { color: red; font-weight: bold; }
    </style>

$for s in ctx.stylesheets:
    <link rel="stylesheet" type="text/css" href="$s">

$for jsurl in ctx.javascripts:
    <script type="text/javascript" src="$jsurl"></script>

</head>
<body>
$if ctx.user:
    <form action="$homepath()/account/logout" method='POST'>
    <p class="login">
    Welcome, <a href="$homepath()/$ctx.user.name">$ctx.user.displayname</a>
    | <a href="$homepath()/account/preferences">Preferences</a>
    | <button class="linky" type="submit">Log Out</button>
    </p>
    </form>
$else:
    <p class="login">[<a href="$homepath()/account/login">Log In</a>]</p>

<h1>$page.title</h1>

$if ctx.error:
    <p class="error"><pre>$ctx.error</pre></p>

<p>
$:page
</p>
</body>
</html>
