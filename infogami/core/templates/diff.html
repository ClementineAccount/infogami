$def with (map, a, b)

$add_stylesheet('/files/core/diff.css')

$var title: diff

<p>[<a href="$changequery(m=None, a=None, b=None)">view</a>][<a href="$changequery(m='edit', a=None, b=None)">edit</a>]</p>

<div class="diff">

<table class="sidebyside" summary="Differences">
    <colgroup class="l"><col class="lineno" /><col class="content" /></colgroup>
    <colgroup class="r"><col class="lineno" /><col class="content" /></colgroup>
    <thead>
          <tr> 
              <th colspan="2">Revision $a.revision</th> 
              <th colspan="2">Revision $b.revision</th>
          </tr>
    </thead>
$for row in map:
    $ key = row[0]
    $ ai = row[1]
    $ a = row[2]
    $ bi = row[3]
    $ b = row[4]
    <tbody class="$key">
    <tr><th>$ai</th><td class='l'>$:spacesafe(a or ' ')</td><th>$bi</th><td class='r'>$:spacesafe(b or ' ')</td></tr>
    </tbody>
</table>

   <div id="legend">
    <h3>Legend:</h3>
    <dl>
     <dt class="unmod"></dt><dd>Unmodified</dd>
     <dt class="add"></dt><dd>Added</dd>
     <dt class="rem"></dt><dd>Removed</dd>
     <dt class="mod"></dt><dd>Modified</dd>
    </dl>
   </div>
</div>
